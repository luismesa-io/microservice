USE [master];

CREATE TABLE MICROSERVICE.BUILDINGS(BUILDING_ID UNIQUEIDENTIFIER NOT NULL DEFAULT (NEWID()), BUILDING_NAME VARCHAR(256) NOT NULL, BUILDING_ADDRESS VARCHAR(256) NOT NULL, VERSION BIGINT DEFAULT 0, CONSTRAINT BUILDINGS_PK PRIMARY KEY(BUILDING_ID));
INSERT INTO MICROSERVICE.BUILDINGS(BUILDING_ID, BUILDING_NAME, BUILDING_ADDRESS) VALUES (cast(stuff(stuff(stuff(stuff(replace(replace('00000000000000000000000000000000','0x',''),'-',''),21,0,'-'),17,0,'-'),13,0,'-'),9,0,'-') as uniqueidentifier), 'Rainbow Tower', 'Hobbiton, The Shire');
INSERT INTO MICROSERVICE.BUILDINGS(BUILDING_ID, BUILDING_NAME, BUILDING_ADDRESS) VALUES (cast(stuff(stuff(stuff(stuff(replace(replace('0000000000000000FFFFFFFFFFFFFFFF','0x',''),'-',''),21,0,'-'),17,0,'-'),13,0,'-'),9,0,'-') as uniqueidentifier), 'Barad-d√ªr, the Dark Tower', 'Mordor, near the volcano Mount Doom (Orodruin)');

CREATE TABLE MICROSERVICE.FLOORS(FLOOR_ID UNIQUEIDENTIFIER NOT NULL DEFAULT (NEWID()), FLOOR_NUMBER VARCHAR(256) NOT NULL, VERSION BIGINT DEFAULT 0, CONSTRAINT FLOORS_PK PRIMARY KEY(FLOOR_ID));
INSERT INTO MICROSERVICE.FLOORS(FLOOR_ID, FLOOR_NUMBER) VALUES (cast(stuff(stuff(stuff(stuff(replace(replace('00000000000000000000000000000000','0x',''),'-',''),21,0,'-'),17,0,'-'),13,0,'-'),9,0,'-') as uniqueidentifier), '10');
INSERT INTO MICROSERVICE.FLOORS(FLOOR_ID, FLOOR_NUMBER) VALUES (cast(stuff(stuff(stuff(stuff(replace(replace('0000000000000000FFFFFFFFFFFFFFFF','0x',''),'-',''),21,0,'-'),17,0,'-'),13,0,'-'),9,0,'-') as uniqueidentifier), '11');
INSERT INTO MICROSERVICE.FLOORS(FLOOR_ID, FLOOR_NUMBER) VALUES (cast(stuff(stuff(stuff(stuff(replace(replace('FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF','0x',''),'-',''),21,0,'-'),17,0,'-'),13,0,'-'),9,0,'-') as uniqueidentifier), '14');

CREATE TABLE MICROSERVICE.BUILDING_FLOORS(BUILDING_FLOOR_ID UNIQUEIDENTIFIER NOT NULL DEFAULT (NEWID()), BUILDING_ID UNIQUEIDENTIFIER, FLOOR_ID UNIQUEIDENTIFIER, VERSION BIGINT DEFAULT 0, CONSTRAINT BUILDING_FLOOR_PK PRIMARY KEY(BUILDING_FLOOR_ID), CONSTRAINT BUILDING_FLOOR_UQ UNIQUE(BUILDING_ID, FLOOR_ID), CONSTRAINT BUILDING_FLOORS_BUILDING_FK FOREIGN KEY(BUILDING_ID) REFERENCES MICROSERVICE.BUILDINGS(BUILDING_ID), CONSTRAINT BUILDING_FLOORS_FLOOR_FK FOREIGN KEY(FLOOR_ID) REFERENCES MICROSERVICE.FLOORS(FLOOR_ID));
INSERT INTO MICROSERVICE.BUILDING_FLOORS(BUILDING_ID, FLOOR_ID) VALUES (cast(stuff(stuff(stuff(stuff(replace(replace('0000000000000000FFFFFFFFFFFFFFFF','0x',''),'-',''),21,0,'-'),17,0,'-'),13,0,'-'),9,0,'-') as uniqueidentifier), cast(stuff(stuff(stuff(stuff(replace(replace('00000000000000000000000000000000','0x',''),'-',''),21,0,'-'),17,0,'-'),13,0,'-'),9,0,'-') as uniqueidentifier));
INSERT INTO MICROSERVICE.BUILDING_FLOORS(BUILDING_ID, FLOOR_ID) VALUES (cast(stuff(stuff(stuff(stuff(replace(replace('00000000000000000000000000000000','0x',''),'-',''),21,0,'-'),17,0,'-'),13,0,'-'),9,0,'-') as uniqueidentifier), cast(stuff(stuff(stuff(stuff(replace(replace('0000000000000000FFFFFFFFFFFFFFFF','0x',''),'-',''),21,0,'-'),17,0,'-'),13,0,'-'),9,0,'-') as uniqueidentifier));
INSERT INTO MICROSERVICE.BUILDING_FLOORS(BUILDING_ID, FLOOR_ID) VALUES (cast(stuff(stuff(stuff(stuff(replace(replace('00000000000000000000000000000000','0x',''),'-',''),21,0,'-'),17,0,'-'),13,0,'-'),9,0,'-') as uniqueidentifier), cast(stuff(stuff(stuff(stuff(replace(replace('FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF','0x',''),'-',''),21,0,'-'),17,0,'-'),13,0,'-'),9,0,'-') as uniqueidentifier));